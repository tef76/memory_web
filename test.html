<html>
  <head>
    <title>Exemple JavaScript</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" media="screen" href="https://fontlibrary.org/face/comfortaa" type="text/css"/>
  </head>
  <body>
    <p id = "p1"></p>
    <p id = "p2"></p>
    <p id = "p3"></p>
    
    <section id="memory-game"></section>

    <script>
      
      
      let colors = ["c", "d", "h", "s"];
let ranks = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11",
    "12", "13"];

// randPick : renvoie un élément au hasard du tableau array
function randPick(array) {
  return array[Math.floor(Math.random() * array.length)];
}

      
      
      
      class Card {
  constructor(threshold) {
    this.color = randPick(colors);
    this.rank = randPick(ranks.slice(0, threshold + 1));
    this.imgBack = "img/backs/Card-Back-02-custom.png";
    this.imgFront = "img/cards/" + this.color + this.rank + ".png";
    this.selected = false;
    this.container;
    this.id = Math.random();
  }

  // Card.isEqualTo : renvoie un boolen selon si les deux cartes sont égales au
  //    sens rang/couleur
  isEqualTo(card) {
    return (this.rank == card.rank) && (this.color == card.color);
  }

  // Card.summon : créé les balises HTML associées à la carte dans la balise
  //    d'id "memory-game" et ajoute un évènement associé au clic
  summon() {
    this.container = document.createElement("div");
    this.container.setAttribute("class", "card-container");
    this.container.setAttribute("id", this.id);
    document.getElementById("memory-game").appendChild(this.container);

    let inner = document.createElement("div");
    inner.setAttribute("class","card-inner");
    this.container.appendChild(inner);

    let front = document.createElement("img");
    front.setAttribute("class", "card-front");
    front.setAttribute("src", this.imgFront);
    front.setAttribute("alt", "Image Front");
    inner.appendChild(front);

    let back = document.createElement("img");
    back.setAttribute("class", "card-back");
    back.setAttribute("src", this.imgBack);
    back.setAttribute("alt", "Image Back");
    inner.appendChild(back);

    this.container.addEventListener("click", function() {
      // inner.classList.toggle("card-inner-flip");
      inner.setAttribute("class", "card-inner-flip");
      this.selected = true;
    });
  }
}
  let cards = [];
  
  // Rempli le tableau cards de nouvelles paires de carte
    for (var i = 0; i < 10; i++) {
      let card = new Card(20);
      cards.push(card);
      cards.push(card);
    }
    
    
    // Affiche toutes les cartes du tableau cards
    cards.forEach(function(card){
      card.summon();
    });
  
  
    </script>
  </body>
</html>
